# StarCraft II 强化学习环境配置说明

## 环境信息

- **操作系统**: Windows 10
- **Python版本**: 3.10.19
- **Conda环境**: sc2_rl
- **PySC2版本**: 4.0.0
- **SC2安装路径**: C:\Program Files (x86)\StarCraft II
- **SC2版本**: Base95841

## 已安装的关键依赖

```
pysc2==4.0.0
numpy==2.2.6
protobuf==3.20.3  # 重要：必须使用3.20.3以兼容PySC2
absl-py==2.3.1
pygame==2.6.1
```

## 已下载的Mini-game地图

位置: `C:\Program Files (x86)\StarCraft II\Maps\mini_games\`

1. BuildMarines.SC2Map
2. CollectMineralsAndGas.SC2Map
3. CollectMineralShards.SC2Map
4. DefeatRoaches.SC2Map
5. DefeatZerglingsAndBanelings.SC2Map
6. FindAndDefeatZerglings.SC2Map
7. MoveToBeacon.SC2Map

## 关键配置步骤

### 1. Conda环境创建
```bash
conda create -n sc2_rl python=3.10 -y
conda activate sc2_rl
```

### 2. 安装依赖
```bash
pip install pysc2
pip install protobuf==3.20.3  # 降级protobuf解决兼容性问题
```

### 3. 配置SC2路径
```bash
python setup_sc2_env.py
```
或在PowerShell中手动设置:
```powershell
$env:SC2PATH='C:\Program Files (x86)\StarCraft II'
```

### 4. 下载地图
```bash
python download_maps.py
```

### 5. 验证环境
```bash
python test_sc2_env.py --norender
```

## 常见问题解决

### 问题1: Protobuf版本不兼容
**错误信息**: `TypeError: Descriptors cannot be created directly`

**解决方案**:
```bash
pip install protobuf==3.20.3
```

### 问题2: 地图未找到
**错误信息**: `ValueError: Map mini_games\MoveToBeacon.SC2Map not found`

**解决方案**:
```bash
python download_maps.py
```

### 问题3: SC2PATH未设置
**解决方案**:
```bash
python setup_sc2_env.py
```

### 问题4: PowerShell不支持&&操作符
**解决方案**: 分开执行命令，或使用分号`;`

## 测试结果

### 环境测试 (test_sc2_env.py)
- ✓ SC2PATH配置正确
- ✓ 环境创建成功
- ✓ 环境重置成功
- ✓ 执行5个测试步骤成功

### Agent测试 (simple_agent.py)
- ✓ 随机agent可以正常运行
- ✓ 可以与环境交互
- ✓ 观察和动作空间正常

## 项目结构（参考）

```
SC2_RL/
├── README.md
├── requirements.txt
├── setup_sc2_env.py
├── download_maps.py
├── test_sc2_env.py
├── simple_agent.py
├── mini_games_experiment/
└── docs/
```

